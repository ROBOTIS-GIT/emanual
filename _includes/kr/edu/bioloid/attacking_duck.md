- `학습 목표`: 근처로 접근하는 물체를 공격하는 오리를 만들어 보겠습니다. 조립서의 2-2-11. 공격하는 오리를 참조하여 하드웨어를 완성하십시오.

`주의` 로봇에 전원이 인가되면 로봇 근처에 얼굴을 가져가지 마십시오. 오리의 공격으로 부상 당할 위험이 있습니다.
{: .notice--warning}

![](/assets/images/edu/bioloid/attackingduck_kr.png)

공격하는 오리의 행동 패턴은 아래와 같습니다.  
1. 물체가 감지되지 않으면 ID[1] 관절은 중앙에, ID[2] ~ ID[3] 관절은 접어서 공격을 준비합니다.
2. 물체가 좌우에서 감지되면 ID[1] 관절을 움직여서 오리의 주둥이를 물체가 감지되는 방향으로 회전시킵니다.
3. 정면에서 물체가 감지되면 ID[2] ~ ID[3] 관절을 쭉 펴서 공격합니다.
4. 공격한 후에는 2 번 상태로 돌아갑니다.

### 태스크 코드 작성

![](/assets/images/edu/bioloid/attackingduck_tsk-01_kr.png)

1. 모터 이동 속도 기본값 입력 및 초기 행동 호출  
2. 왼쪽에서 물체가 감지되면 왼쪽으로 주둥이를 회전  
  AX-S1 의 왼쪽 거리센서에 물체가 감지되면 ID[1] 의 관절에 현재 위치 값에서 20을 더한 위치 값을 목표 위치로 입력하여 왼쪽으로 회전하도록 합니다. 그런데 위치가 지나치게 돌아가는 것을 방지하기 위해 현재 위치 값이 812 보다 작은 경우에만 움직이도록 작성합니다.
3. 오른쪽에서 물체가 감지되면 오른쪽으로 주둥이를 회전  
  AX-S1 의 오른쪽 거리센서에 물체가 감지되면 ID[1] 의 관절에 현재 위치 값에서 20을 뺀 위치 값을 목표 위치로 입력하여 오른쪽으로 회전하도록 합니다. 그런데 위치가 지나치게 돌아가는 것을 방지하기 위해 현재 위치 값이 212 보다 큰 경우에만 움직이도록 작성합니다.
4. 전방에 물체 감지 시 공격  
  AX-S1 의 중앙 거리센서에 물체가 감지되면 부리공격을 호출하여 공격합니다.

    ![](/assets/images/edu/bioloid/attackingduck_tsk-02_kr.png)

    ![](/assets/images/edu/bioloid/attackingduck_tsk-03_kr.png)

5. 초기 행동 만들기  
  초기 행동은 ID[1] 관절에 적절한 목표 위치 값(512)을 넣어 주둥이를 가운데로 이동한 뒤 부리 공격을 한 번 호출 하여 초기 자세를 잡도록 구성합니다.  
6. 공격 행동 만들기  
  ID[2], ID[3] 관절의 적절한 목표 위치 값을 입력시켜 공격 동작과 고개 들기(준비 동작) 동작을 만듭니다. 각 동작이 끝날 때까지 행동제어 프로그램의 진행을 잠시 중단시킬 수 있는 움직임대기(7) 함수도 프로그래밍 합니다.

### 다운로드

- 완성된 태스크 코드 : [Download][BIO_CMP_AttackingDuck_KR.tsk]
- 다운로드 방법 : [태스크 코드 다운로드]

### 동작 확인
다운로드한 태스크 코드를 PLAY 시킵니다. 물체를 오리에 접근시키면서 접근하는 물체를 공격하는지 확인하십시오. 오리가 동작하는 동안은 얼굴을 가까이 하지 마십시오.

![](/assets/images/edu/bioloid/attackingduck_action_kr.png)
